# Memo 应用设计规范

## 📱 首页 Tab 导航设计

### 设计来源
参考 Figma 设计稿 - Forcast 应用底部导航栏

### 设计分析

#### 底部导航栏结构
- **位置**: 屏幕底部固定
- **样式**: 5个Tab图标 + 文字标签
- **高度**: 约 60-70px（包含安全区域）
- **背景**: 白色/浅色背景
- **分割线**: 顶部有细分割线（可选）

#### Tab 设计规范

**当前选中状态:**
- 图标颜色: 紫色（主色调）
- 文字颜色: 紫色（主色调）
- 文字大小: 12-14px
- 图标大小: 24x24px

**未选中状态:**
- 图标颜色: 灰色（#9E9E9E 或类似）
- 文字颜色: 灰色（#9E9E9E 或类似）
- 文字大小: 12-14px
- 图标大小: 24x24px

#### 颜色方案

**主色调（选中状态）:**
- 紫色: `#9C27B0` 或 `#7B1FA2`（Material Design Purple）
- 根据memo应用规范，可调整为蓝色系: `#2196F3` 或 `#1976D2`

**未选中状态:**
- 灰色: `#9E9E9E` 或 `#757575`

**背景色:**
- 浅色模式: `#FFFFFF`
- 深色模式: `#121212` 或 `#1E1E1E`

---

## 🎯 Memo 应用 Tab 规划

### Tab 结构（5个Tab）

#### 1. 首页 (Home) - 默认选中
- **图标**: Home/首页图标
- **功能**: 
  - 显示今日打卡状态
  - 显示当前番茄钟状态
  - 快速操作入口
  - 今日统计概览

#### 2. 打卡 (Check-in)
- **图标**: Check/打卡图标（如日历标记或勾选图标）
- **功能**:
  - 打卡操作
  - 打卡历史列表
  - 打卡统计

#### 3. 番茄钟 (Pomodoro)
- **图标**: Timer/时钟图标
- **功能**:
  - 番茄钟计时器
  - 番茄钟历史
  - 番茄钟统计

#### 4. 日历 (Calendar)
- **图标**: Calendar/日历图标
- **功能**:
  - 打卡日历视图
  - 番茄钟日历视图
  - 历史记录查看

#### 5. 设置 (Settings)
- **图标**: Settings/设置图标
- **功能**:
  - 应用设置
  - 主题切换
  - 数据管理
  - 关于页面

---

## 🎨 UI 组件设计规范

### 底部导航栏组件

**组件名称**: `BottomNavigationBar` 或自定义 `CustomBottomNavBar`

**属性定义:**
```dart
// 伪代码示例
class CustomBottomNavBar extends StatelessWidget {
  final int currentIndex;
  final Function(int) onTap;
  final List<BottomNavItem> items;
  
  // 设计参数
  - height: 60-70px
  - backgroundColor: 根据主题
  - selectedColor: 主色调（紫色/蓝色）
  - unselectedColor: 灰色
  - iconSize: 24px
  - fontSize: 12-14px
  - elevation: 8px（阴影）
}
```

**Tab Item 结构:**
- Icon Widget（图标）
- Text Widget（文字标签）
- 间距: Icon 和 Text 之间 4-6px

### 动画效果
- Tab 切换: 淡入淡出动画（150-200ms）
- 选中状态: 图标和文字颜色平滑过渡
- 点击反馈: 轻微缩放或涟漪效果（可选）

---

## 📐 布局规范

### 屏幕布局结构
```
┌─────────────────────────┐
│                         │
│      AppBar/Header      │
│      (可选)             │
│                         │
├─────────────────────────┤
│                         │
│                         │
│      Main Content       │
│      (页面内容)         │
│                         │
│                         │
├─────────────────────────┤
│  Home │ Check │ Pom │   │
│  Cal  │ Settings        │
│  (Bottom Navigation)    │
└─────────────────────────┘
```

### 安全区域适配
- 底部导航栏需要考虑设备安全区域（如iPhone的Home指示器）
- 使用 `SafeArea` Widget 包裹底部导航栏
- 底部padding: 根据设备自动调整

---

## 🎨 颜色系统

### 主色调方案（根据.rules规范调整）

**方案A - 蓝色系（符合规范）:**
- 主色: `#2196F3` (Blue 500)
- 深色: `#1976D2` (Blue 700)
- 浅色: `#64B5F6` (Blue 300)

**方案B - 紫色系（参考设计稿）:**
- 主色: `#9C27B0` (Purple 500)
- 深色: `#7B1FA2` (Purple 700)
- 浅色: `#BA68C8` (Purple 300)

**功能色:**
- 打卡功能: `#4CAF50` (Green 500)
- 番茄钟功能: `#F44336` (Red 500)
- 警告: `#FF9800` (Orange 500)
- 信息: `#2196F3` (Blue 500)

**中性色:**
- 文字主色（浅色模式）: `#212121`
- 文字次色（浅色模式）: `#757575`
- 文字主色（深色模式）: `#FFFFFF`
- 文字次色（深色模式）: `#B0B0B0`
- 分割线: `#E0E0E0` (浅色) / `#424242` (深色)

---

## 📱 响应式设计

### 屏幕尺寸适配
- **小屏手机** (< 360px): Tab文字可考虑隐藏，仅显示图标
- **标准手机** (360-414px): 正常显示图标+文字
- **大屏手机** (> 414px): 正常显示，可适当增加间距

### 横屏适配
- 横屏时底部导航栏保持固定
- Tab图标和文字布局不变
- 考虑使用侧边栏导航（可选，未来版本）

---

## 🔤 字体规范

### 字体大小
- Tab标签文字: 12-14px
- 页面标题: 20-24px
- 正文: 14-16px
- 辅助文字: 12px

### 字体权重
- Tab标签: Regular (400)
- 页面标题: Medium (500) 或 Bold (700)
- 正文: Regular (400)

### 字体族
- 中文: 系统默认（PingFang SC / Roboto）
- 英文/数字: Roboto（Material Design默认）

---

## ✨ 交互规范

### Tab 切换
- **触发方式**: 点击Tab图标或文字区域
- **响应时间**: < 100ms
- **视觉反馈**: 立即切换颜色，页面内容平滑切换

### 页面切换动画
- **动画类型**: PageView 滑动切换 或 淡入淡出
- **动画时长**: 200-300ms
- **缓动函数**: Curves.easeInOut

### 点击反馈
- **Material Design**: Ripple效果（可选）
- **iOS风格**: 轻微缩放（可选）
- **反馈时长**: 100-150ms

---

## 🛠️ 实现计划

### Phase 1: 底部导航栏基础实现
- [ ] 创建 `CustomBottomNavBar` Widget
- [ ] 定义Tab数据模型
- [ ] 实现Tab切换逻辑
- [ ] 应用颜色主题
- [ ] 添加选中/未选中状态样式

### Phase 2: 页面结构搭建
- [ ] 创建5个主要页面框架
  - [ ] HomeView（首页）
  - [ ] CheckInView（打卡）
  - [ ] PomodoroView（番茄钟）
  - [ ] CalendarView（日历）
  - [ ] SettingsView（设置）
- [ ] 实现页面路由管理
- [ ] 集成底部导航栏

### Phase 3: 主题适配
- [ ] 实现浅色模式样式
- [ ] 实现深色模式样式
- [ ] 主题切换功能
- [ ] 颜色系统统一管理

### Phase 4: 动画和交互优化
- [ ] Tab切换动画
- [ ] 页面切换动画
- [ ] 点击反馈效果
- [ ] 性能优化

### Phase 5: 响应式适配
- [ ] 小屏适配
- [ ] 大屏适配
- [ ] 横屏适配（可选）
- [ ] 安全区域适配

---

## 📝 设计决策记录

### 2024-XX-XX: 底部导航栏设计
**决策**: 采用5个Tab的底部导航栏设计  
**参考**: Figma设计稿 - Forcast应用  
**原因**:
- 符合移动端导航最佳实践
- 5个Tab数量适中，不会过于拥挤
- 图标+文字标签清晰易懂
- 符合Material Design规范

### 2024-XX-XX: Tab内容规划
**决策**: Home / Check-in / Pomodoro / Calendar / Settings  
**原因**:
- Home作为默认入口，提供概览和快速操作
- Check-in和Pomodoro作为核心功能独立Tab
- Calendar提供历史记录查看
- Settings统一管理设置

### 2024-XX-XX: 颜色方案
**决策**: 主色调采用蓝色系（符合.rules规范）  
**原因**:
- 与项目规范保持一致
- 蓝色系专业、可信赖
- 功能色区分（绿色打卡，红色番茄钟）

---

## 🎯 下一步行动

1. **确认Tab规划**: 与产品需求确认5个Tab的功能划分
2. **图标资源**: 准备或设计5个Tab的图标资源
3. **开始实现**: 按照实现计划Phase 1开始开发
4. **设计评审**: 完成基础实现后进行设计评审

---

## ⏰ 番茄钟时钟选择器设计

### 设计来源
参考 Figma 设计稿 - Forcast 应用时间选择器，适配到番茄钟功能

### 设计分析

#### 整体布局结构
```
┌─────────────────────────┐
│  Select time (标签)      │
│                         │
│  [07] : [00]  [AM]     │
│              [PM]       │
│                         │
│      ╭─────────╮       │
│     │   时钟盘   │       │
│     │  1-12数字 │       │
│     │  指针指示 │       │
│      ╰─────────╯       │
│                         │
│  [📅]  [Cancel] [OK]   │
└─────────────────────────┘
```

#### 数字时间显示区域

**位置**: 时钟选择器上方居中

**小时显示:**
- 背景: 浅紫色/浅蓝色圆角矩形
- 文字: 大号数字，紫色/蓝色
- 大小: 约 60x60px
- 圆角: 8-12px

**分钟显示:**
- 背景: 白色圆角矩形
- 文字: 大号数字，黑色
- 大小: 约 60x60px
- 圆角: 8-12px

**分隔符:**
- 冒号 ":" 分隔小时和分钟
- 颜色: 灰色或主色调
- 大小: 与数字高度匹配

**AM/PM 选择按钮:**
- 位置: 时间显示右侧，垂直堆叠
- 选中状态: 粉红色/主色调背景，白色文字
- 未选中状态: 白色背景，灰色文字
- 大小: 约 40x40px
- 圆角: 8px

#### 模拟时钟选择器

**时钟盘设计:**
- 形状: 圆形
- 直径: 约 280-320px（占屏幕宽度60-70%）
- 背景: 白色/浅色背景
- 边框: 细边框（可选）

**时钟数字:**
- 位置: 时钟盘边缘，1-12均匀分布
- 字体大小: 16-20px
- 颜色: 深灰色/黑色
- 数字位置: 标准时钟位置（12点、3点、6点、9点等）

**小时指针:**
- 样式: 深紫色/深蓝色线条
- 长度: 从中心指向选中的小时数字
- 宽度: 3-4px
- 颜色: 主色调深色版本

**分钟指示器:**
- 样式: 小圆点或短线条
- 位置: 时钟盘边缘对应分钟位置
- 颜色: 紫色/蓝色
- 大小: 6-8px

**选中指示器:**
- 样式: 深色圆形背景
- 位置: 当前选中的小时数字位置
- 大小: 约 40x40px
- 颜色: 主色调深色版本

#### 底部操作按钮

**日历图标按钮:**
- 位置: 左下角
- 图标: 日历/网格图标
- 功能: 打开日期选择器（可选）

**Cancel 按钮:**
- 位置: 右下角左侧
- 文字: "Cancel" / "取消"
- 颜色: 浅紫色/浅蓝色文字
- 样式: 文字按钮，无背景

**OK 按钮:**
- 位置: 右下角右侧
- 文字: "OK" / "确定"
- 颜色: 深紫色/深蓝色文字或背景
- 样式: 文字按钮或填充按钮

---

## 🍅 番茄钟倒计时页面设计

### 页面布局结构

#### 倒计时显示区域
```
┌─────────────────────────┐
│                         │
│      ╭─────────╮       │
│     │           │       │
│     │   25:00   │       │
│     │  (大数字) │       │
│     │           │       │
│      ╰─────────╯       │
│                         │
│     工作模式 / 休息模式   │
│                         │
│  [⏸️]  [⏭️]  [⏹️]      │
│  暂停   跳过   重置      │
└─────────────────────────┘
```

#### 倒计时数字显示

**样式:**
- 字体大小: 72-96px（超大号）
- 字体权重: Bold (700)
- 颜色: 
  - 工作模式: 红色系（#F44336）
  - 短休息: 绿色系（#4CAF50）
  - 长休息: 蓝色系（#2196F3）
- 格式: MM:SS（分钟:秒）
- 位置: 屏幕中央

#### 模式指示器

**显示内容:**
- "工作模式" / "短休息" / "长休息"
- 字体大小: 18-20px
- 颜色: 与倒计时数字颜色一致
- 位置: 倒计时数字下方

#### 控制按钮区域

**按钮布局:**
- 水平排列，均匀分布
- 按钮大小: 约 60x60px
- 按钮间距: 20-30px

**暂停/继续按钮:**
- 图标: ⏸️ / ▶️
- 功能: 暂停或继续倒计时
- 颜色: 主色调

**跳过按钮:**
- 图标: ⏭️
- 功能: 跳过当前番茄钟，进入下一个阶段
- 颜色: 灰色或警告色

**重置按钮:**
- 图标: ⏹️
- 功能: 重置当前番茄钟
- 颜色: 灰色或警告色

#### 进度指示器（可选）

**圆形进度条:**
- 位置: 倒计时数字外围
- 样式: 圆形进度条，显示剩余时间比例
- 颜色: 渐变或单色
- 宽度: 4-6px

---

## 🎨 番茄钟颜色方案

### 工作模式（25分钟）
- 主色: `#F44336` (Red 500)
- 深色: `#D32F2F` (Red 700)
- 浅色: `#EF5350` (Red 400)
- 背景: 浅红色渐变或白色

### 短休息模式（5分钟）
- 主色: `#4CAF50` (Green 500)
- 深色: `#388E3C` (Green 700)
- 浅色: `#66BB6A` (Green 400)
- 背景: 浅绿色渐变或白色

### 长休息模式（15分钟）
- 主色: `#2196F3` (Blue 500)
- 深色: `#1976D2` (Blue 700)
- 浅色: `#64B5F6` (Blue 300)
- 背景: 浅蓝色渐变或白色

---

## ✨ 交互设计

### 时钟选择器交互

**转动时钟盘:**
- 手势: 手指拖动时钟盘边缘
- 响应: 实时更新小时和分钟
- 反馈: 指针平滑移动，数字实时更新
- 限制: 
  - 小时: 1-12（配合AM/PM）
  - 分钟: 0-59（5分钟或1分钟步进）

**点击数字:**
- 功能: 快速选择小时或分钟
- 反馈: 数字高亮，指针移动到对应位置

**AM/PM切换:**
- 点击按钮切换
- 选中状态视觉反馈明显

**OK按钮:**
- 点击后: 关闭选择器，开始倒计时
- 验证: 确保时间有效（> 0）
- 动画: 选择器淡出，倒计时页面淡入

**Cancel按钮:**
- 点击后: 关闭选择器，不保存选择
- 动画: 选择器淡出

### 倒计时交互

**倒计时运行:**
- 每秒更新显示
- 数字平滑变化（可选动画）
- 进度条实时更新

**暂停/继续:**
- 点击暂停: 停止倒计时，按钮变为"继续"
- 点击继续: 恢复倒计时，按钮变为"暂停"
- 状态保持: 暂停时保持当前时间

**跳过:**
- 确认对话框: "确定要跳过当前番茄钟吗？"
- 确认后: 立即结束当前阶段，进入下一阶段

**重置:**
- 确认对话框: "确定要重置番茄钟吗？"
- 确认后: 恢复到初始状态（25:00工作模式）

**倒计时结束:**
- 提示: 通知/震动/声音
- 自动切换: 工作→短休息，短休息→工作，4个工作后→长休息
- 动画: 数字归零动画，模式切换动画

---

## 📱 响应式设计

### 时钟选择器适配
- 小屏: 时钟盘直径缩小至240-260px
- 大屏: 时钟盘直径可增大至360px
- 横屏: 时钟盘和数字显示并排布局（可选）

### 倒计时页面适配
- 小屏: 数字大小72px
- 大屏: 数字大小96px
- 横屏: 保持竖屏布局，数字居中

---

## 🛠️ 技术实现要点

### 时钟选择器实现
- 使用 `GestureDetector` 或 `CustomPaint` 实现可拖动时钟盘
- 计算触摸点角度，转换为小时/分钟
- 使用 `Transform.rotate` 实现指针旋转动画
- 数字时间显示使用 `Text` Widget，实时更新

### 倒计时实现
- 使用 `Timer.periodic` 每秒更新
- 使用 `ChangeNotifier` 管理倒计时状态
- 使用 `CircularProgressIndicator` 或自定义绘制进度条
- 使用 `flutter_local_notifications` 实现通知提醒

---

## 📝 设计决策记录

### 2024-XX-XX: 时钟选择器设计
**决策**: 采用数字显示+模拟时钟盘的双重选择方式  
**参考**: Figma设计稿 - Forcast应用时间选择器  
**原因**:
- 数字显示直观清晰
- 模拟时钟盘提供可视化选择体验
- 双重方式满足不同用户习惯
- 符合移动端交互习惯

### 2024-XX-XX: 番茄钟颜色方案
**决策**: 工作-红色，短休息-绿色，长休息-蓝色  
**原因**:
- 红色代表专注和紧迫感
- 绿色代表放松和休息
- 蓝色代表深度休息
- 颜色区分明显，易于识别

---

**最后更新**: 2024-XX-XX  
**设计参考**: Figma - Forcast应用底部导航栏和时间选择器

